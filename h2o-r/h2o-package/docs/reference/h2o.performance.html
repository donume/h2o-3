<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Model Performance Metrics in H2O — h2o.performance • h2o</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">h2o</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Using
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Getting Started</li>
    <li>
      <a href="../articles/basics.html">H2O Basics</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/h2oai/h2o-3">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Model Performance Metrics in H2O</h1>
    </div>

    
    <p>Given a trained h2o model, compute its performance on the given
dataset</p>
    

    <pre class="usage"><span class='fu'>h2o.performance</span>(<span class='no'>model</span>, <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>train</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>valid</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>xval</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>An <a href='H2OModel-class.html'>H2OModel</a> object</p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>An H2OFrame. The model will make predictions
on this dataset, and subsequently score them. The dataset should
match the dataset that was used to train the model, in terms of
column names, types, and dimensions. If newdata is passed in, then train, valid, and xval are ignored.</p></td>
    </tr>
    <tr>
      <th>train</th>
      <td><p>A logical value indicating whether to return the training metrics (constructed during training).</p>
<p>Note: when the trained h2o model uses balance_classes, the training metrics constructed during training will be from the balanced training dataset.
For more information visit: <a href='https://0xdata.atlassian.net/browse/TN-9'>https://0xdata.atlassian.net/browse/TN-9</a></p></td>
    </tr>
    <tr>
      <th>valid</th>
      <td><p>A logical value indicating whether to return the validation metrics (constructed during training).</p></td>
    </tr>
    <tr>
      <th>xval</th>
      <td><p>A logical value indicating whether to return the cross-validation metrics (constructed during training).</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>(DEPRECATED) An H2OFrame. This argument is now called `newdata`.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns an object of the <a href='H2OModelMetrics-class.html'>H2OModelMetrics</a> subclass.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>library</span>(<span class='no'>h2o</span>)
<span class='fu'><a href='h2o.init.html'>h2o.init</a></span>()</div><div class='output co'>#&gt; Reading in config file: ./../../../../.h2oconfig
#&gt;  Connection successful!
#&gt; 
#&gt; R is connected to the H2O cluster: 
#&gt;     H2O cluster uptime:         3 days 4 hours 
#&gt;     H2O cluster timezone:       
#&gt;     H2O data parsing timezone:  
#&gt;     H2O cluster version:        3.17.0.99999 
#&gt;     H2O cluster version age:    3 days  
#&gt;     H2O cluster name:           terrytangyuan 
#&gt;     H2O cluster total nodes:    1 
#&gt;     H2O cluster total memory:   15.82 GB 
#&gt;     H2O cluster total cores:    8 
#&gt;     H2O cluster allowed cores:  8 
#&gt;     H2O cluster healthy:        TRUE 
#&gt;     H2O Connection ip:          localhost 
#&gt;     H2O Connection port:        54321 
#&gt;     H2O Connection proxy:       NA 
#&gt;     H2O Internal Security:      FALSE 
#&gt;     H2O API Extensions:         XGBoost, Algos, AutoML, Core V3, Core V4 
#&gt;     R Version:                  R version 3.4.2 (2017-09-28) 
#&gt; </div><div class='input'><span class='no'>prosPath</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>, <span class='st'>"prostate.csv"</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>"h2o"</span>)
<span class='no'>prostate.hex</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='h2o.importFile.html'>h2o.uploadFile</a></span>(<span class='kw'>path</span> <span class='kw'>=</span> <span class='no'>prosPath</span>)</div><div class='output co'>#&gt;   |                                                                              |                                                                      |   0%  |                                                                              |======================================================================| 100%</div><div class='input'><span class='no'>prostate.hex</span>$<span class='no'>CAPSULE</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='as.factor.html'>as.factor</a></span>(<span class='no'>prostate.hex</span>$<span class='no'>CAPSULE</span>)
<span class='no'>prostate.gbm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='h2o.gbm.html'>h2o.gbm</a></span>(<span class='fl'>3</span>:<span class='fl'>9</span>, <span class='st'>"CAPSULE"</span>, <span class='no'>prostate.hex</span>)</div><div class='output co'>#&gt;   |                                                                              |                                                                      |   0%  |                                                                              |=====================                                                 |  30%  |                                                                              |======================================================================| 100%</div><div class='input'><span class='fu'>h2o.performance</span>(<span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>prostate.gbm</span>, <span class='kw'>newdata</span><span class='kw'>=</span><span class='no'>prostate.hex</span>)</div><div class='output co'>#&gt; H2OBinomialMetrics: gbm
#&gt; 
#&gt; MSE:  0.07338612
#&gt; RMSE:  0.2708987
#&gt; LogLoss:  0.2675724
#&gt; Mean Per-Class Error:  0.07431401
#&gt; AUC:  0.9801618
#&gt; Gini:  0.9603236
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;          0   1    Error     Rate
#&gt; 0      217  10 0.044053  =10/227
#&gt; 1       16 137 0.104575  =16/153
#&gt; Totals 233 147 0.068421  =26/380
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold    value idx
#&gt; 1                       max f1  0.477235 0.913333 146
#&gt; 2                       max f2  0.339414 0.947302 184
#&gt; 3                 max f0point5  0.579116 0.934230 128
#&gt; 4                 max accuracy  0.477235 0.931579 146
#&gt; 5                max precision  0.982481 1.000000   0
#&gt; 6                   max recall  0.189702 1.000000 233
#&gt; 7              max specificity  0.982481 1.000000   0
#&gt; 8             max absolute_mcc  0.477235 0.857317 146
#&gt; 9   max min_per_class_accuracy  0.441872 0.908497 156
#&gt; 10 max mean_per_class_accuracy  0.477235 0.925686 146
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`</div><div class='input'>
<span class='co'>## If model uses balance_classes</span>
<span class='co'>## the results from train = TRUE will not match the results from newdata = prostate.hex</span>
<span class='no'>prostate.gbm.balanced</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='h2o.gbm.html'>h2o.gbm</a></span>(<span class='fl'>3</span>:<span class='fl'>9</span>, <span class='st'>"CAPSULE"</span>, <span class='no'>prostate.hex</span>, <span class='kw'>balance_classes</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;   |                                                                              |                                                                      |   0%  |                                                                              |======================                                                |  32%  |                                                                              |======================================================================| 100%</div><div class='input'><span class='fu'>h2o.performance</span>(<span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>prostate.gbm.balanced</span>, <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='no'>prostate.hex</span>)</div><div class='output co'>#&gt; H2OBinomialMetrics: gbm
#&gt; 
#&gt; MSE:  0.07613993
#&gt; RMSE:  0.2759346
#&gt; LogLoss:  0.269857
#&gt; Mean Per-Class Error:  0.08752987
#&gt; AUC:  0.974648
#&gt; Gini:  0.949296
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;          0   1    Error     Rate
#&gt; 0      211  16 0.070485  =16/227
#&gt; 1       16 137 0.104575  =16/153
#&gt; Totals 227 153 0.084211  =32/380
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold    value idx
#&gt; 1                       max f1  0.446296 0.895425 152
#&gt; 2                       max f2  0.300473 0.922208 182
#&gt; 3                 max f0point5  0.567457 0.923191 130
#&gt; 4                 max accuracy  0.446296 0.915789 152
#&gt; 5                max precision  0.971155 1.000000   0
#&gt; 6                   max recall  0.157209 1.000000 234
#&gt; 7              max specificity  0.971155 1.000000   0
#&gt; 8             max absolute_mcc  0.446296 0.824940 152
#&gt; 9   max min_per_class_accuracy  0.396491 0.903084 160
#&gt; 10 max mean_per_class_accuracy  0.446296 0.912470 152
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`</div><div class='input'><span class='fu'>h2o.performance</span>(<span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>prostate.gbm.balanced</span>, <span class='kw'>train</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; H2OBinomialMetrics: gbm
#&gt; ** Reported on training data. **
#&gt; 
#&gt; MSE:  0.07583012
#&gt; RMSE:  0.2753727
#&gt; LogLoss:  0.2720462
#&gt; Mean Per-Class Error:  0.07862129
#&gt; AUC:  0.979442
#&gt; Gini:  0.958884
#&gt; 
#&gt; Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
#&gt;          0   1    Error     Rate
#&gt; 0      211  16 0.070485  =16/227
#&gt; 1       19 200 0.086758  =19/219
#&gt; Totals 230 216 0.078475  =35/446
#&gt; 
#&gt; Maximum Metrics: Maximum metrics at their respective thresholds
#&gt;                         metric threshold    value idx
#&gt; 1                       max f1  0.446296 0.919540 152
#&gt; 2                       max f2  0.300473 0.944987 182
#&gt; 3                 max f0point5  0.587449 0.942327 126
#&gt; 4                 max accuracy  0.446296 0.921525 152
#&gt; 5                max precision  0.971155 1.000000   0
#&gt; 6                   max recall  0.157209 1.000000 234
#&gt; 7              max specificity  0.971155 1.000000   0
#&gt; 8             max absolute_mcc  0.446296 0.843037 152
#&gt; 9   max min_per_class_accuracy  0.446296 0.913242 152
#&gt; 10 max mean_per_class_accuracy  0.446296 0.921379 152
#&gt; 
#&gt; Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
